{"ast":null,"code":"var _jsxFileName = \"/home/gregory/projetos/sd-016-a-project-recipes-app/src/context/GlobalProvider.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useLocation, useHistory } from 'react-router-dom';\nimport copy from 'clipboard-copy';\nimport GlobalContext from './GlobalContext';\nimport fetchAPI from '../services/fetchAPI';\nimport Card from '../components/card/card';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function GlobalProvider(_ref) {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [buttonLogin, setButtonLogin] = useState({\n    disabledButt: true\n  });\n  const [showSearchBar, setShowSearchBar] = useState(false);\n  const [search, setBySearch] = useState('');\n  const [radioSelected, setRadioSelected] = useState('');\n  const [filterResult, setfilterResult] = useState('');\n  const [ingredients, setIngredients] = useState([]);\n\n  const validateButton = () => {\n    const emailValid = /\\S+@\\S+\\.\\S+/.test(email);\n    const passwordLength = 6;\n\n    if (emailValid && password.length >= passwordLength) {\n      setButtonLogin({\n        disabledButt: false\n      });\n    } else {\n      setButtonLogin({\n        disabledButt: true\n      });\n    }\n  };\n\n  const handleEmail = _ref2 => {\n    let {\n      target: {\n        value\n      }\n    } = _ref2;\n    setEmail(value);\n    validateButton();\n  };\n\n  const handlePassword = _ref3 => {\n    let {\n      target: {\n        value\n      }\n    } = _ref3;\n    setPassword(value);\n    validateButton();\n  };\n\n  const handleClick = () => {\n    localStorage.setItem('mealsToken', 1);\n    localStorage.setItem('cocktailsToken', 1);\n    localStorage.setItem('user', JSON.stringify({\n      email\n    }));\n  };\n\n  const location = useLocation();\n  const history = useHistory();\n\n  const handleSearchMeals = filterData => {\n    const alert = 'Sorry, we haven\\'t found any recipes for these filters.';\n\n    if (!filterData.meals) {\n      global.alert(alert);\n    } else {\n      setfilterResult(filterData); // redirect caso encontre somente um resultado.\n\n      if (location.pathname.includes('foods') && filterData.meals.length === 1) {\n        history.push(`/foods/${filterData.meals[0].idMeal}`);\n      }\n    }\n  };\n\n  const handleSearchCocktails = filterData => {\n    const alert = 'Sorry, we haven\\'t found any recipes for these filters.';\n\n    if (!filterData.drinks) {\n      global.alert(alert);\n    } else {\n      setfilterResult(filterData); // redirect caso encontre somente um resultado.\n\n      if (location.pathname.includes('drinks') && filterData.drinks.length === 1) {\n        history.push(`/drinks/${filterData.drinks[0].idDrink}`);\n      }\n    }\n  };\n\n  const handleSearchClick = () => {\n    if (location.pathname.includes('foods')) {\n      if (radioSelected === 'ingredients') {\n        fetchAPI('fetchMealByIngredient', search).then(data => handleSearchMeals(data));\n      }\n\n      if (radioSelected === 'name') {\n        fetchAPI('fetchMealByName', search).then(data => handleSearchMeals(data));\n      }\n\n      if (radioSelected === 'firstLetter') {\n        fetchAPI('fetchMealByFirstLetter', search).then(data => handleSearchMeals(data));\n      }\n    }\n\n    if (location.pathname.includes('drinks')) {\n      if (radioSelected === 'ingredients') {\n        fetchAPI('fetchCocktailByIngredient', search).then(data => handleSearchCocktails(data));\n      }\n\n      if (radioSelected === 'name') {\n        fetchAPI('fetchCocktailByName', search).then(data => handleSearchCocktails(data));\n      }\n\n      if (radioSelected === 'firstLetter') {\n        fetchAPI('fetchCocktailByFirstLetter', search).then(data => handleSearchCocktails(data));\n      }\n    }\n  };\n\n  const renderFoodRecipes = arrayOfRecipes => {\n    const MAX_MEALS = 12;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: arrayOfRecipes && arrayOfRecipes.slice(0, MAX_MEALS).map((recipe, i) => /*#__PURE__*/_jsxDEV(Card, {\n        index: i,\n        name: recipe.strMeal,\n        img: recipe.strMealThumb,\n        id: recipe.idMeal\n      }, recipe.idMeal, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this);\n  };\n\n  const renderDrinkRecipes = arrayOfRecipes => {\n    const MAX_DRINKS = 12;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: arrayOfRecipes && arrayOfRecipes.slice(0, MAX_DRINKS).map((recipe, i) => /*#__PURE__*/_jsxDEV(Card, {\n        index: i,\n        name: recipe.strDrink,\n        img: recipe.strDrinkThumb,\n        id: recipe.idDrink\n      }, recipe.idDrink, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this);\n  };\n\n  const filterByIngredient = ingred => {\n    if (location.pathname.includes('foods')) {\n      fetchAPI('fetchMealByIngredient', ingred).then(data => handleSearchMeals(data));\n    }\n\n    if (location.pathname.includes('drinks')) {\n      fetchAPI('fetchCocktailByIngredient', ingred).then(data => handleSearchCocktails(data));\n    }\n  };\n\n  const handleRecipeStarted = (recipe, checkboxList) => {\n    const getRecipes = JSON.parse(localStorage.getItem('inProgressRecipes')) || {\n      meals: {},\n      cocktails: {}\n    };\n    const mealToSave = { ...getRecipes,\n      meals: { ...getRecipes.meals,\n        [recipe.idMeal]: { ...checkboxList\n        }\n      }\n    };\n    const drinkToSave = { ...getRecipes,\n      cocktails: { ...getRecipes.cocktails,\n        [recipe.idDrink]: { ...checkboxList\n        }\n      }\n    };\n\n    if (location.pathname.includes('food')) {\n      localStorage.setItem('inProgressRecipes', JSON.stringify(mealToSave));\n    } else {\n      localStorage.setItem('inProgressRecipes', JSON.stringify(drinkToSave));\n    }\n  };\n\n  const [linkCopy, setLinkCopy] = useState(false);\n\n  const linkC = () => {\n    const linkForCopy = window.location.href.split('/in-progress')[0];\n    copy(linkForCopy);\n    setLinkCopy(true);\n  };\n\n  const contextValue = {\n    handleEmail,\n    email,\n    handlePassword,\n    password,\n    buttonLogin,\n    setButtonLogin,\n    handleClick,\n    showSearchBar,\n    setShowSearchBar,\n    search,\n    setBySearch,\n    radioSelected,\n    setRadioSelected,\n    handleSearchClick,\n    filterResult,\n    setfilterResult,\n    renderFoodRecipes,\n    renderDrinkRecipes,\n    ingredients,\n    setIngredients,\n    filterByIngredient,\n    handleRecipeStarted,\n    linkC,\n    linkCopy\n  };\n  return /*#__PURE__*/_jsxDEV(GlobalContext.Provider, {\n    value: contextValue,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 215,\n    columnNumber: 5\n  }, this);\n}\n\n_s(GlobalProvider, \"YbBufRooKJTzxQ7+WkxYVesjZ5E=\", false, function () {\n  return [useLocation, useHistory];\n});\n\n_c = GlobalProvider;\nGlobalProvider.propTypes = {\n  children: PropTypes.node.isRequired\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"GlobalProvider\");","map":{"version":3,"sources":["/home/gregory/projetos/sd-016-a-project-recipes-app/src/context/GlobalProvider.js"],"names":["React","useState","PropTypes","useLocation","useHistory","copy","GlobalContext","fetchAPI","Card","GlobalProvider","children","email","setEmail","password","setPassword","buttonLogin","setButtonLogin","disabledButt","showSearchBar","setShowSearchBar","search","setBySearch","radioSelected","setRadioSelected","filterResult","setfilterResult","ingredients","setIngredients","validateButton","emailValid","test","passwordLength","length","handleEmail","target","value","handlePassword","handleClick","localStorage","setItem","JSON","stringify","location","history","handleSearchMeals","filterData","alert","meals","global","pathname","includes","push","idMeal","handleSearchCocktails","drinks","idDrink","handleSearchClick","then","data","renderFoodRecipes","arrayOfRecipes","MAX_MEALS","slice","map","recipe","i","strMeal","strMealThumb","renderDrinkRecipes","MAX_DRINKS","strDrink","strDrinkThumb","filterByIngredient","ingred","handleRecipeStarted","checkboxList","getRecipes","parse","getItem","cocktails","mealToSave","drinkToSave","linkCopy","setLinkCopy","linkC","linkForCopy","window","href","split","contextValue","propTypes","node","isRequired"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useLocation, useHistory } from 'react-router-dom';\nimport copy from 'clipboard-copy';\nimport GlobalContext from './GlobalContext';\nimport fetchAPI from '../services/fetchAPI';\nimport Card from '../components/card/card';\n\nexport default function GlobalProvider({ children }) {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [buttonLogin, setButtonLogin] = useState({ disabledButt: true });\n  const [showSearchBar, setShowSearchBar] = useState(false);\n  const [search, setBySearch] = useState('');\n  const [radioSelected, setRadioSelected] = useState('');\n  const [filterResult, setfilterResult] = useState('');\n  const [ingredients, setIngredients] = useState([]);\n\n  const validateButton = () => {\n    const emailValid = /\\S+@\\S+\\.\\S+/.test(email);\n    const passwordLength = 6;\n    if (emailValid && password.length >= passwordLength) {\n      setButtonLogin({ disabledButt: false });\n    } else {\n      setButtonLogin({ disabledButt: true });\n    }\n  };\n\n  const handleEmail = ({ target: { value } }) => {\n    setEmail(value);\n    validateButton();\n  };\n\n  const handlePassword = ({ target: { value } }) => {\n    setPassword(value);\n    validateButton();\n  };\n\n  const handleClick = () => {\n    localStorage.setItem('mealsToken', 1);\n    localStorage.setItem('cocktailsToken', 1);\n    localStorage.setItem('user', JSON.stringify({ email }));\n  };\n\n  const location = useLocation();\n  const history = useHistory();\n\n  const handleSearchMeals = (filterData) => {\n    const alert = 'Sorry, we haven\\'t found any recipes for these filters.';\n    if (!filterData.meals) {\n      global.alert(alert);\n    } else {\n      setfilterResult(filterData);\n      // redirect caso encontre somente um resultado.\n      if (location.pathname.includes('foods') && filterData.meals.length === 1) {\n        history.push(`/foods/${filterData.meals[0].idMeal}`);\n      }\n    }\n  };\n\n  const handleSearchCocktails = (filterData) => {\n    const alert = 'Sorry, we haven\\'t found any recipes for these filters.';\n    if (!filterData.drinks) {\n      global.alert(alert);\n    } else {\n      setfilterResult(filterData);\n      // redirect caso encontre somente um resultado.\n      if (location.pathname.includes('drinks') && filterData.drinks.length === 1) {\n        history.push(`/drinks/${filterData.drinks[0].idDrink}`);\n      }\n    }\n  };\n\n  const handleSearchClick = () => {\n    if (location.pathname.includes('foods')) {\n      if (radioSelected === 'ingredients') {\n        fetchAPI('fetchMealByIngredient', search)\n          .then((data) => handleSearchMeals(data));\n      }\n      if (radioSelected === 'name') {\n        fetchAPI('fetchMealByName', search)\n          .then((data) => handleSearchMeals(data));\n      }\n      if (radioSelected === 'firstLetter') {\n        fetchAPI('fetchMealByFirstLetter', search)\n          .then((data) => handleSearchMeals(data));\n      }\n    }\n    if (location.pathname.includes('drinks')) {\n      if (radioSelected === 'ingredients') {\n        fetchAPI('fetchCocktailByIngredient', search)\n          .then((data) => handleSearchCocktails(data));\n      }\n      if (radioSelected === 'name') {\n        fetchAPI('fetchCocktailByName', search)\n          .then((data) => handleSearchCocktails(data));\n      }\n      if (radioSelected === 'firstLetter') {\n        fetchAPI('fetchCocktailByFirstLetter', search)\n          .then((data) => handleSearchCocktails(data));\n      }\n    }\n  };\n\n  const renderFoodRecipes = (arrayOfRecipes) => {\n    const MAX_MEALS = 12;\n    return (\n      <div>\n        { arrayOfRecipes && arrayOfRecipes\n          .slice(0, MAX_MEALS)\n          .map((recipe, i) => (\n            <Card\n              key={ recipe.idMeal }\n              index={ i }\n              name={ recipe.strMeal }\n              img={ recipe.strMealThumb }\n              id={ recipe.idMeal }\n            />\n          )) }\n      </div>);\n  };\n\n  const renderDrinkRecipes = (arrayOfRecipes) => {\n    const MAX_DRINKS = 12;\n    return (\n      <div>\n        {arrayOfRecipes && arrayOfRecipes\n          .slice(0, MAX_DRINKS)\n          .map((recipe, i) => (\n            <Card\n              key={ recipe.idDrink }\n              index={ i }\n              name={ recipe.strDrink }\n              img={ recipe.strDrinkThumb }\n              id={ recipe.idDrink }\n            />\n          )) }\n      </div>);\n  };\n\n  const filterByIngredient = (ingred) => {\n    if (location.pathname.includes('foods')) {\n      fetchAPI('fetchMealByIngredient', ingred)\n        .then((data) => handleSearchMeals(data));\n    }\n    if (location.pathname.includes('drinks')) {\n      fetchAPI('fetchCocktailByIngredient', ingred)\n        .then((data) => handleSearchCocktails(data));\n    }\n  };\n\n  const handleRecipeStarted = (recipe, checkboxList) => {\n    const getRecipes = JSON.parse(localStorage.getItem('inProgressRecipes')) || {\n      meals: {},\n      cocktails: {},\n    };\n\n    const mealToSave = {\n      ...getRecipes,\n      meals: {\n        ...getRecipes.meals,\n        [recipe.idMeal]: { ...checkboxList },\n      },\n    };\n\n    const drinkToSave = {\n      ...getRecipes,\n      cocktails: {\n        ...getRecipes.cocktails,\n        [recipe.idDrink]: { ...checkboxList },\n      },\n    };\n    if (location.pathname.includes('food')) {\n      localStorage.setItem('inProgressRecipes', JSON.stringify(mealToSave));\n    } else {\n      localStorage.setItem('inProgressRecipes', JSON.stringify(drinkToSave));\n    }\n  };\n\n  const [linkCopy, setLinkCopy] = useState(false);\n\n  const linkC = () => {\n    const linkForCopy = window.location.href.split('/in-progress')[0];\n    copy(linkForCopy);\n    setLinkCopy(true);\n  };\n\n  const contextValue = {\n    handleEmail,\n    email,\n    handlePassword,\n    password,\n    buttonLogin,\n    setButtonLogin,\n    handleClick,\n    showSearchBar,\n    setShowSearchBar,\n    search,\n    setBySearch,\n    radioSelected,\n    setRadioSelected,\n    handleSearchClick,\n    filterResult,\n    setfilterResult,\n    renderFoodRecipes,\n    renderDrinkRecipes,\n    ingredients,\n    setIngredients,\n    filterByIngredient,\n    handleRecipeStarted,\n    linkC,\n    linkCopy,\n  };\n  return (\n    <GlobalContext.Provider value={ contextValue }>\n      { children }\n    </GlobalContext.Provider>\n  );\n}\n\nGlobalProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n"]},"metadata":{},"sourceType":"module"}